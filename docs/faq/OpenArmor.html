<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenArmor: FAQ &#8212; OpenArmor</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/parallax.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script src="../../_static/js/jquery-fix.js"></script>
    <script src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Syscheck: FAQ" href="syscheck.html" />
    <link rel="prev" title="Miscellaneous: FAQ" href="misc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138780766-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-138780766-1');
</script>

<script type="text/javascript">
  var _ss = _ss || [];
  _ss.push(['_setDomain', 'https://koi-3QNN51VTHS.marketingautomation.services/net']);
  _ss.push(['_setAccount', 'KOI-4APYNOYP8O']);
  _ss.push(['_trackPageView']);
  window._pa = window._pa || {};
  // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
  // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
  // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
  (function() {
  var ss = document.createElement('script');
  ss.type = 'text/javascript'; ss.async = true;
  ss.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'koi-3QNN51VTHS.marketingautomation.services/client/ss.js?ver=2.4.0';
  var scr = document.getElementsByTagName('script')[0];
  scr.parentNode.insertBefore(ss, scr);
  })();
  </script>



  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><img src="../../_static/OpenArmor_logo_bare_small.jpg">
          OpenArmor</a>
        <span class="navbar-text navbar-version pull-left"><b>3.6.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://theopenarmor.org/about/">About</a></li>
                <li><a href="https://theopenarmor.org/docs/">Documentation</a></li>
                <li><a href="https://theopenarmor.org/register-for-OpenArmor/">Get OpenArmor+</a></li>
                <li><a href="https://theopenarmor.org/downloads/">Downloads</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">Manual</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbooks/index.html">User submitted Cookbooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/build/index.html">Build, compile, and not much more</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/oRFC/index.html">oRFC:</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Syntax and Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">Output Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/index.html">Man pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="misc.html" title="Previous Chapter: Miscellaneous: FAQ"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Miscellaneous: FAQ</span>
    </a>
  </li>
  <li>
    <a href="syscheck.html" title="Next Chapter: Syscheck: FAQ"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Syscheck: FAQ &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="OpenArmor-faq">
<span id="faq-OpenArmor"></span><h1>OpenArmor: FAQ<a class="headerlink" href="#OpenArmor-faq" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#can-an-OpenArmor-manager-have-more-than-256-agents" id="id1">Can an OpenArmor manager have more than 256 agents?</a></p></li>
<li><p><a class="reference internal" href="#where-are-OpenArmor-s-logs-stored" id="id2">Where are OpenArmor’s logs stored?</a></p></li>
<li><p><a class="reference internal" href="#where-can-i-view-the-logs-sent-to-an-OpenArmor-manager-or-on-a-local-install" id="id3">Where can I view the logs sent to an OpenArmor manager (or on a local install)?</a></p></li>
<li><p><a class="reference internal" href="#can-OpenArmor-s-logs-be-saved-to-a-different-directory" id="id4">Can OpenArmor’s logs be saved to a different directory?</a></p></li>
<li><p><a class="reference internal" href="#i-m-getting-an-error-when-starting-OpenArmor-OpenArmor-analysisd-testing-rules-failed-configuration-error-exiting-why" id="id5">I’m getting an error when starting OpenArmor: “OpenArmor analysisd: Testing rules failed. Configuration error. Exiting.” Why?</a></p></li>
<li><p><a class="reference internal" href="#the-rules-aren-t-on-my-agents-they-re-only-on-the-server" id="id6">The rules aren’t on my agents, they’re only on the server!</a></p></li>
<li><p><a class="reference internal" href="#do-the-rules-get-pushed-to-the-agents-automatically" id="id7">Do the rules get pushed to the agents automatically?</a></p></li>
<li><p><a class="reference internal" href="#how-can-i-get-OpenArmor-log-to-rotate-daily" id="id8">How can I get OpenArmor.log to rotate daily?</a></p></li>
</ul>
</div>
<div class="section" id="can-an-OpenArmor-manager-have-more-than-256-agents">
<h2><a class="toc-backref" href="#id1">Can an OpenArmor manager have more than 256 agents?</a><a class="headerlink" href="#can-an-OpenArmor-manager-have-more-than-256-agents" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>By default OpenArmor limits the number of agents to 256 per manager. This limitation is set in the code, but can be modified at compile time.
Depending on the event load, a manager running on modern hardware can handle many more agents.
Some users have more than 1000 agents on a single manager.
To change the maximum number of agents, cd into the src directory and run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">make setmaxagents</span>
</pre></div>
</div>
<p>You should be prompted for the number of agents to allow.</p>
<p>One issue you may face after changing this setting is the number of files allowed to be open for a single user.
The users <code class="docutils literal notranslate"><span class="pre">OpenArmor</span></code> and <code class="docutils literal notranslate"><span class="pre">OpenArmorr</span></code> both open at least 1 file (syscheck database and rids file) per agent.
Raising this limit is operating system specific.</p>
<p>Some Linux distributions support a <code class="docutils literal notranslate"><span class="pre">/etc/security/limits.conf</span></code>. Set the limits to be at least a few files above what the max agents is set to.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">OpenArmor            soft    nofile          2048</span>
<span class="go">OpenArmor            hard    nofile          2048</span>
<span class="go">OpenArmorr           soft    nofile          2048</span>
<span class="go">OpenArmorr           hard    nofile          2048</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="where-are-OpenArmor-s-logs-stored">
<h2><a class="toc-backref" href="#id2">Where are OpenArmor’s logs stored?</a><a class="headerlink" href="#where-are-OpenArmor-s-logs-stored" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>On OpenArmor server and local installs there are several classes of OpenArmor logs.
There are the logs created by the OpenArmor daemons, the log messages from the agents, and the alerts.
Agent installs do not have logs from other agents or alerts, but do have logs created by the OpenArmor processes.</p>
<p>All logs are stored in subdirectories of <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs</span></code>.
OpenArmor’s log messages are stored in <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs/OpenArmor.log</span></code>.</p>
<p>Log messages from the agents are not stored by default. After analysis they are deleted unless the &lt;logall&gt; option is included in the manager’s OpenArmor.conf.
If set all log messages sent to the manager are stored in <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs/archives/archives.log</span></code> and rotated daily.</p>
<p>Alerts are stored in <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs/alerts/alerts.log</span></code>, and rotated daily.</p>
</div></blockquote>
</div>
<div class="section" id="where-can-i-view-the-logs-sent-to-an-OpenArmor-manager-or-on-a-local-install">
<h2><a class="toc-backref" href="#id3">Where can I view the logs sent to an OpenArmor manager (or on a local install)?</a><a class="headerlink" href="#where-can-i-view-the-logs-sent-to-an-OpenArmor-manager-or-on-a-local-install" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>OpenArmor does not store the logs sent to it by default. If a log does not trigger an alert it is discarded, and logs that do trigger alerts are stored with the alerts in <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs/alerts</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;log-all&gt;</span></code> option can be added to the <code class="docutils literal notranslate"><span class="pre">&lt;global&gt;</span></code> section (see: <a class="reference internal" href="../syntax/head_OpenArmor_config.global.html#OpenArmor-config-global"><span class="std std-ref">OpenArmor.conf: Global options</span></a>) of the manager’s OpenArmor.conf. The manager’s OpenArmor processes should be restarted.
The raw logs will then be saved to files, organized by date, in <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor/logs/archives</span></code>.</p>
<p>The headers attached to these log messages are in the format of <code class="docutils literal notranslate"><span class="pre">&quot;YYYY</span> <span class="pre">Month</span> <span class="pre">dd</span> <span class="pre">HH:MM:ss</span> <span class="pre">agent_name-&gt;/path/to/log/file</span> <span class="pre">&quot;</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">2011 Aug 04 00:00:01 server-&gt;/var/log/local7 Aug  4 00:00:26 server named[29909]: client 192.168.1.7#39323: query: fake.example.net IN AAAA +</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="can-OpenArmor-s-logs-be-saved-to-a-different-directory">
<h2><a class="toc-backref" href="#id4">Can OpenArmor’s logs be saved to a different directory?</a><a class="headerlink" href="#can-OpenArmor-s-logs-be-saved-to-a-different-directory" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>As a protection mechanism, OpenArmor chroots most of its processes to the install directory (typically <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor</span></code>).
Due to this chroot, logs must be saved to a location under <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor</span></code>.
OpenArmor does rotate its logs, but will not be able to move them from <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor</span></code>.</p>
<p>Be sure to allocate enough space to <code class="docutils literal notranslate"><span class="pre">/var/OpenArmor</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="i-m-getting-an-error-when-starting-OpenArmor-OpenArmor-analysisd-testing-rules-failed-configuration-error-exiting-why">
<h2><a class="toc-backref" href="#id5">I’m getting an error when starting OpenArmor: “OpenArmor analysisd: Testing rules failed. Configuration error. Exiting.” Why?</a><a class="headerlink" href="#i-m-getting-an-error-when-starting-OpenArmor-OpenArmor-analysisd-testing-rules-failed-configuration-error-exiting-why" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>There was a small bug in the OpenArmor-control script that was not caught in time for 2.6.
The error comes from the script trying to run OpenArmor-logtest from the wrong directory.
The solution is to change the line where OpenArmor-logtest is running to look like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo | ${DIR}/bin/OpenArmor-logtest &gt; /dev/null 2&gt;&amp;1;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="the-rules-aren-t-on-my-agents-they-re-only-on-the-server">
<h2><a class="toc-backref" href="#id6">The rules aren’t on my agents, they’re only on the server!</a><a class="headerlink" href="#the-rules-aren-t-on-my-agents-they-re-only-on-the-server" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>That’s not a question. Also, that’s the way it is. Only the server has the rules. Agents do not get a copy of the rules.</p>
</div></blockquote>
</div>
<div class="section" id="do-the-rules-get-pushed-to-the-agents-automatically">
<h2><a class="toc-backref" href="#id7">Do the rules get pushed to the agents automatically?</a><a class="headerlink" href="#do-the-rules-get-pushed-to-the-agents-automatically" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The rules only exist on the manager. All analysis is done on the manager.
Agents do not send alerts to the manager, they only send the raw logs.</p>
</div></blockquote>
</div>
<div class="section" id="how-can-i-get-OpenArmor-log-to-rotate-daily">
<h2><a class="toc-backref" href="#id8">How can I get OpenArmor.log to rotate daily?</a><a class="headerlink" href="#how-can-i-get-OpenArmor-log-to-rotate-daily" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Currently OpenArmor does not rotate the <code class="docutils literal notranslate"><span class="pre">OpenArmor.log</span></code>, use logrotate.d or newsyslog to rotate it for now.</p>
</div></blockquote>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2010-2021, OpenArmor Project Team.<br/>
    OpenArmor <b>OpenArmor.net</b> domain owned and maintained by <a href="https://theopenarmor.org" target="_blank">OpenArmor Foundation</a><br/>
    Home page graphics courtesy of <a href="https://pixabay.com" target="_blank">pixabay</a>
    </p>
  </div>
</footer>
  </body>
</html>